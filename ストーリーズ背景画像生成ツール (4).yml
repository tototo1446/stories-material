app:
  description: ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚ºå°æœ¬ã‹ã‚‰ã€Œæ–‡å­—å…¥ã‚Œå°‚ç”¨ã€èƒŒæ™¯ç”»åƒã‚’ä¸€æ‹¬ç”Ÿæˆã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€‚Instagramã®UIã‚„æ–‡å­—é…ç½®ã‚’è€ƒæ…®ã—ãŸä½™ç™½ï¼ˆãƒã‚¬ãƒ†ã‚£ãƒ–ã‚¹ãƒšãƒ¼ã‚¹ï¼‰ã‚’è¨ˆç®—ã—ã€ãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼ã«åˆã‚ã›ãŸç”»åƒã‚’ç”Ÿæˆã—ã¾ã™ã€‚Dify
    Cloudå¯¾å¿œï¼šç”»åƒã‚’base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦å‡ºåŠ›ã€‚
  icon: ğŸ¤–
  icon_background: '#E4FBCC'
  mode: workflow
  name: ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚ºèƒŒæ™¯ç”»åƒç”Ÿæˆãƒ„ãƒ¼ãƒ«
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/gemini:0.7.5@13e7f1c10c3844d943714bd74bfc4fe26a21fae32efbe678858d6ac5079b2b3e
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables: []
  environment_variables:
  - description: Ideogram APIã‚­ãƒ¼
    id: 5b2a5ecb-ba17-4431-b5c2-46e308f48f17
    name: IDEOGRAM_API_KEY
    selector:
    - env
    - IDEOGRAM_API_KEY
    value: ''
    value_type: secret
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        attachment_image_file_size_limit: 2
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        file_upload_limit: 50
        image_file_batch_limit: 10
        image_file_size_limit: 10
        single_chunk_attachment_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: edge_1
      source: start_1
      sourceHandle: source
      target: llm_script_analysis
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: edge_2
      source: llm_script_analysis
      sourceHandle: source
      target: code_parse_slides
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: edge_5
      source: code_format_result
      sourceHandle: source
      target: code_base64_convert
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: edge_6_base64_to_end
      source: code_base64_convert
      sourceHandle: source
      target: end_1
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: iteration
      id: code_parse_slides-source-1770215929047-target
      source: code_parse_slides
      sourceHandle: source
      target: '1770215929047'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: '1770215929047'
        sourceType: iteration-start
        targetType: llm
      id: 1770215929047start-source-1770215931878-target
      source: 1770215929047start
      sourceHandle: source
      target: '1770215931878'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        isInLoop: false
        iteration_id: '1770215929047'
        sourceType: llm
        targetType: llm
      id: 1770215931878-source-1770216163260-target
      source: '1770215931878'
      sourceHandle: source
      target: '1770216163260'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInLoop: false
        sourceType: iteration
        targetType: code
      id: 1770215929047-source-code_format_result-target
      source: '1770215929047'
      sourceHandle: source
      target: code_format_result
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - label: ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚ºå°æœ¬
          max_length: 10000
          options: []
          required: true
          type: paragraph
          variable: script
        - label: ãƒ†ãƒ¼ãƒ
          max_length: 200
          options: []
          required: true
          type: text-input
          variable: theme
        - label: ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®ç›®çš„
          options:
          - å…±æ„Ÿ
          - æ•™è‚²
          - è²©å£²ä¿ƒé€²
          - ãƒ–ãƒ©ãƒ³ãƒ‰èªçŸ¥
          - ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ
          required: true
          type: select
          variable: purpose
        - label: é›°å›²æ°—ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«
          options:
          - ãƒŸãƒ‹ãƒãƒ«ãƒ»ã‚·ãƒ³ãƒ—ãƒ«
          - ãƒŠãƒãƒ¥ãƒ©ãƒ«ãƒ»ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯
          - ãƒ¢ãƒ€ãƒ³ãƒ»æ´—ç·´
          - ãƒãƒƒãƒ—ãƒ»ã‚«ãƒ©ãƒ•ãƒ«
          - é«˜ç´šæ„Ÿãƒ»ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆ
          - ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ»è¦ªã—ã¿ã‚„ã™ã„
          required: true
          type: select
          variable: mood
        - default: '#FFFFFF'
          label: ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼ï¼ˆHEXï¼‰
          max_length: 7
          options: []
          required: false
          type: text-input
          variable: brand_color
        - default: '#000000'
          label: ã‚µãƒ–ã‚«ãƒ©ãƒ¼ï¼ˆHEXï¼‰
          max_length: 7
          options: []
          required: false
          type: text-input
          variable: sub_color
      height: 239
      id: start_1
      position:
        x: 0
        y: 300
      positionAbsolute:
        x: 0
        y: 300
      selected: false
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gemini-2.0-flash
          provider: langgenius/gemini/google
        prompt_template:
        - id: f50bf1f7-f748-4331-b96e-fddc843df5f1
          role: system
          text: 'ã‚ãªãŸã¯Instagramã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚ºã®å°‚é–€å®¶ã§ã™ã€‚

            ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå…¥åŠ›ã—ãŸå°æœ¬ã‚’åˆ†æã—ã€å„ã‚¹ãƒ©ã‚¤ãƒ‰ã®æƒ…å ±ã‚’æ§‹é€ åŒ–ã—ã¦ãã ã•ã„ã€‚


            ## å‡ºåŠ›ãƒ«ãƒ¼ãƒ«

            - å°æœ¬ã‹ã‚‰å„ã‚¹ãƒ©ã‚¤ãƒ‰ï¼ˆã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚º1æšåˆ†ï¼‰ã‚’è­˜åˆ¥

            - å„ã‚¹ãƒ©ã‚¤ãƒ‰ã®ã€Œæ„å›³ã€ã€Œã‚­ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã€Œæ¨å¥¨æ§‹å›³ã€ã‚’åˆ†æ

            - å¿…ãšä»¥ä¸‹ã®JSONå½¢å¼ã§å‡ºåŠ›


            ## æ¨å¥¨æ§‹å›³ãƒ‘ã‚¿ãƒ¼ãƒ³

            - center_focus: ä¸­å¤®ã«å¤§ããªä½™ç™½ã€ä¸Šä¸‹ã«è£…é£¾ï¼ˆæ•™è‚²ãƒ»èª¬æ˜å‘ã‘ï¼‰

            - top_heavy: ä¸Šéƒ¨ã«ç”»åƒè¦ç´ ã€ä¸‹åŠåˆ†ã«ä½™ç™½ï¼ˆCTAãƒ»è²©å£²å‘ã‘ï¼‰

            - bottom_heavy: ä¸‹éƒ¨ã«ç”»åƒè¦ç´ ã€ä¸ŠåŠåˆ†ã«ä½™ç™½ï¼ˆæŒ¨æ‹¶ãƒ»å°å…¥å‘ã‘ï¼‰

            - split_horizontal: ä¸Šä¸‹ã§åˆ†å‰²ã€ä¸­å¤®ã«ä½™ç™½å¸¯ï¼ˆæ¯”è¼ƒãƒ»ãƒ“ãƒ•ã‚©ãƒ¼ã‚¢ãƒ•ã‚¿ãƒ¼å‘ã‘ï¼‰

            - frame_style: å››éš…ã«è£…é£¾ã€ä¸­å¤®ã«å¤§ããªä½™ç™½ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é‡è¦–å‘ã‘ï¼‰

            - gradient_fade: ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§ä¸€æ–¹å‘ã«ãƒ•ã‚§ãƒ¼ãƒ‰ï¼ˆæ„Ÿæƒ…è¨´æ±‚å‘ã‘ï¼‰

            '
        - id: d4955778-d1d7-4f1f-a397-b6c4df35ba8c
          role: user
          text: '## å°æœ¬

            {{#start_1.script#}}


            ## ãƒ†ãƒ¼ãƒ

            {{#start_1.theme#}}


            ## ç›®çš„

            {{#start_1.purpose#}}


            ä¸Šè¨˜ã®å°æœ¬ã‚’åˆ†æã—ã€å„ã‚¹ãƒ©ã‚¤ãƒ‰ã®æƒ…å ±ã‚’JSONå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

            '
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              slides:
                description: å„ã‚¹ãƒ©ã‚¤ãƒ‰ã®åˆ†æçµæœ
                items:
                  additionalProperties: false
                  properties:
                    intent:
                      description: ã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã®æ„å›³ãƒ»ç›®çš„
                      type: string
                    key_message:
                      description: ã‚­ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆæ–‡å­—ã¨ã—ã¦è¼‰ã›ã‚‹å†…å®¹ã®è¦ç´„ï¼‰
                      type: string
                    layout:
                      description: æ¨å¥¨æ§‹å›³ãƒ‘ã‚¿ãƒ¼ãƒ³
                      enum:
                      - center_focus
                      - top_heavy
                      - bottom_heavy
                      - split_horizontal
                      - frame_style
                      - gradient_fade
                      type: string
                    slide_number:
                      description: ã‚¹ãƒ©ã‚¤ãƒ‰ç•ªå·
                      type: integer
                    text_content:
                      description: ã‚¹ãƒ©ã‚¤ãƒ‰ã«è¡¨ç¤ºã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆå†…å®¹
                      type: string
                  required:
                  - slide_number
                  - intent
                  - key_message
                  - layout
                  - text_content
                  type: object
                type: array
              total_slides:
                description: ç·ã‚¹ãƒ©ã‚¤ãƒ‰æ•°
                type: integer
            required:
            - slides
            - total_slides
            type: object
        structured_output_enabled: true
        title: å°æœ¬åˆ†æ
        type: llm
        vision:
          enabled: false
      height: 88
      id: llm_script_analysis
      position:
        x: 300
        y: 300
      positionAbsolute:
        x: 300
        y: 300
      selected: false
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(llm_output: str, mood: str, brand_color: str,\
          \ sub_color: str) -> dict:\n    \"\"\"\n    LLMã®å‡ºåŠ›ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®é…åˆ—ã‚’ä½œæˆ\n\
          \    \"\"\"\n    try:\n        data = json.loads(llm_output)\n        slides\
          \ = data.get(\"slides\", [])\n        \n        # å„ã‚¹ãƒ©ã‚¤ãƒ‰ã«è¿½åŠ æƒ…å ±ã‚’ä»˜ä¸\n      \
          \  enriched_slides = []\n        for slide in slides:\n            slide[\"\
          mood\"] = mood\n            slide[\"brand_color\"] = brand_color\n     \
          \       slide[\"sub_color\"] = sub_color\n            enriched_slides.append(json.dumps(slide,\
          \ ensure_ascii=False))\n        \n        return {\n            \"slides_array\"\
          : enriched_slides,\n            \"total_count\": len(enriched_slides)\n\
          \        }\n    except Exception as e:\n        return {\n            \"\
          slides_array\": [],\n            \"total_count\": 0\n        }\n"
        code_language: python3
        outputs:
          slides_array:
            children: null
            type: array[string]
          total_count:
            children: null
            type: number
        selected: false
        title: ã‚¹ãƒ©ã‚¤ãƒ‰é…åˆ—åŒ–
        type: code
        variables:
        - value_selector:
          - llm_script_analysis
          - text
          value_type: string
          variable: llm_output
        - value_selector:
          - start_1
          - mood
          value_type: string
          variable: mood
        - value_selector:
          - start_1
          - brand_color
          value_type: string
          variable: brand_color
        - value_selector:
          - start_1
          - sub_color
          value_type: string
          variable: sub_color
      height: 52
      id: code_parse_slides
      position:
        x: 600
        y: 300
      positionAbsolute:
        x: 600
        y: 300
      selected: false
      type: custom
      width: 242
    - data:
        code: "import json\nimport re\n\ndef main(api_responses: list, total_count:\
          \ int) -> dict:\n    \"\"\"\n    ç”»åƒç”Ÿæˆã®å‡ºåŠ›ã‹ã‚‰ç”»åƒURLç­‰ã‚’æŠ½å‡ºã—ã¦æ•´å½¢\n    Gemini LLM\
          \ / Ideogram API ä¸¡æ–¹ã®å‡ºåŠ›å½¢å¼ã«å¯¾å¿œ\n    \"\"\"\n    results = []\n    \n    for\
          \ i, response_str in enumerate(api_responses):\n        try:\n         \
          \   image_url = \"\"\n            prompt_used = \"\"\n            \n   \
          \         if not response_str or (isinstance(response_str, str) and response_str.strip()\
          \ == \"\"):\n                # ç©ºæ–‡å­—åˆ—ã®å ´åˆï¼ˆGemini LLMã®textå‡ºåŠ›ãŒç©ºã®å ´åˆï¼‰\n       \
          \         results.append({\n                    \"slide_number\": i + 1,\n\
          \                    \"image_url\": \"\",\n                    \"prompt_used\"\
          : \"\",\n                    \"resolution\": \"\",\n                   \
          \ \"status\": \"error\",\n                    \"error_message\": \"LLM text\
          \ output is empty - image may be in files output\"\n                })\n\
          \                continue\n            \n            if isinstance(response_str,\
          \ dict):\n                # è¾æ›¸å‹ã®å ´åˆï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç­‰ï¼‰\n                image_url\
          \ = response_str.get(\"url\", \"\") or response_str.get(\"image_url\", \"\
          \")\n                prompt_used = response_str.get(\"prompt\", \"\") or\
          \ response_str.get(\"prompt_used\", \"\")\n            elif isinstance(response_str,\
          \ str):\n                # URLå½¢å¼ã®å ´åˆ\n                if response_str.strip().startswith(\"\
          http\"):\n                    image_url = response_str.strip()\n       \
          \         else:\n                    # JSONå½¢å¼ã‚’è©¦è¡Œ\n                    try:\n\
          \                        response = json.loads(response_str)\n         \
          \               if isinstance(response, dict):\n                       \
          \     # Ideogram APIå½¢å¼\n                            data = response.get(\"\
          data\", [])\n                            if data and len(data) > 0:\n  \
          \                              image_info = data[0]\n                  \
          \              image_url = image_info.get(\"url\", \"\")\n             \
          \                   prompt_used = image_info.get(\"prompt\", \"\")\n   \
          \                         else:\n                                image_url\
          \ = response.get(\"url\", \"\") or response.get(\"image_url\", \"\")\n \
          \                           prompt_used = response.get(\"prompt\", \"\"\
          )\n                    except (json.JSONDecodeError, ValueError):\n    \
          \                    # URLãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹æ¢ã™\n                        url_match\
          \ = re.search(r'https?://\\S+', response_str)\n                        if\
          \ url_match:\n                            image_url = url_match.group(0)\n\
          \            \n            if image_url:\n                results.append({\n\
          \                    \"slide_number\": i + 1,\n                    \"image_url\"\
          : image_url,\n                    \"prompt_used\": prompt_used,\n      \
          \              \"resolution\": \"1080x1920\",\n                    \"status\"\
          : \"success\"\n                })\n            else:\n                results.append({\n\
          \                    \"slide_number\": i + 1,\n                    \"image_url\"\
          : \"\",\n                    \"prompt_used\": str(response_str)[:200],\n\
          \                    \"resolution\": \"\",\n                    \"status\"\
          : \"error\",\n                    \"error_message\": f\"No image URL found\
          \ in output: {str(response_str)[:100]}\"\n                })\n        except\
          \ Exception as e:\n            results.append({\n                \"slide_number\"\
          : i + 1,\n                \"image_url\": \"\",\n                \"prompt_used\"\
          : \"\",\n                \"resolution\": \"\",\n                \"status\"\
          : \"error\",\n                \"error_message\": str(e)\n            })\n\
          \    \n    success_count = len([r for r in results if r[\"status\"] == \"\
          success\"])\n    \n    return {\n        \"generated_images\": results,\n\
          \        \"total_requested\": total_count,\n        \"success_count\": success_count,\n\
          \        \"summary\": f\"{success_count}/{total_count}æšã®èƒŒæ™¯ç”»åƒã‚’ç”Ÿæˆã—ã¾ã—ãŸ\"\n\
          \    }\n"
        code_language: python3
        outputs:
          generated_images:
            children: null
            type: array[object]
          success_count:
            children: null
            type: number
          summary:
            children: null
            type: string
          total_requested:
            children: null
            type: number
        selected: false
        title: çµæœæ•´å½¢
        type: code
        variables:
        - value_selector:
          - '1770215929047'
          - output
          value_type: array[string]
          variable: api_responses
        - value_selector:
          - code_parse_slides
          - total_count
          value_type: number
          variable: total_count
      height: 52
      id: code_format_result
      position:
        x: 1936
        y: 300
      positionAbsolute:
        x: 1936
        y: 300
      selected: false
      type: custom
      width: 242
    - data:
        code: "import json\nimport base64\nimport urllib.request\nimport ssl\n\ndef\
          \ main(generated_images: list, total_requested: int, success_count: int,\
          \ summary: str) -> dict:\n    \"\"\"\n    ç”»åƒURLã‚’base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦å‡ºåŠ›ã«å«ã‚ã‚‹ã€‚\n \
          \   Difyå†…éƒ¨ã‹ã‚‰ã¯upload.dify.aiã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãŸã‚ã€\n    ã“ã“ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰â†’base64å¤‰æ›ã‚’è¡Œã†ã€‚\n   \
          \ \"\"\"\n    ctx = ssl.create_default_context()\n    ctx.check_hostname\
          \ = False\n    ctx.verify_mode = ssl.CERT_NONE\n\n    results = []\n   \
          \ b64_success = 0\n\n    for img in generated_images:\n        if img.get('status')\
          \ == 'success' and img.get('image_url'):\n            try:\n           \
          \     req = urllib.request.Request(\n                    img['image_url'],\n\
          \                    headers={'User-Agent': 'Mozilla/5.0'}\n           \
          \     )\n                with urllib.request.urlopen(req, context=ctx, timeout=30)\
          \ as response:\n                    image_data = response.read()\n     \
          \               content_type = response.headers.get('Content-Type', 'image/jpeg')\n\
          \                    b64_str = base64.b64encode(image_data).decode('utf-8')\n\
          \                    img['image_base64'] = f\"data:{content_type};base64,{b64_str}\"\
          \n                    b64_success += 1\n            except Exception as\
          \ e:\n                img['image_base64'] = None\n                img['base64_error']\
          \ = str(e)\n        results.append(img)\n\n    return {\n        \"result\"\
          : results,\n        \"total_requested\": total_requested,\n        \"success_count\"\
          : success_count,\n        \"base64_success_count\": b64_success,\n     \
          \   \"summary\": summary\n    }\n"
        code_language: python3
        outputs:
          base64_success_count:
            children: null
            type: number
          result:
            children: null
            type: array[object]
          success_count:
            children: null
            type: number
          summary:
            children: null
            type: string
          total_requested:
            children: null
            type: number
        selected: false
        title: Base64å¤‰æ›
        type: code
        variables:
        - value_selector:
          - code_format_result
          - generated_images
          value_type: array[object]
          variable: generated_images
        - value_selector:
          - code_format_result
          - total_requested
          value_type: number
          variable: total_requested
        - value_selector:
          - code_format_result
          - success_count
          value_type: number
          variable: success_count
        - value_selector:
          - code_format_result
          - summary
          value_type: string
          variable: summary
      height: 52
      id: code_base64_convert
      position:
        x: 2236
        y: 300
      positionAbsolute:
        x: 2236
        y: 300
      selected: false
      type: custom
      width: 242
    - data:
        outputs:
        - value_selector:
          - code_base64_convert
          - summary
          variable: summary
        - value_selector:
          - code_base64_convert
          - result
          variable: result
        - value_selector:
          - code_base64_convert
          - total_requested
          variable: total_requested
        - value_selector:
          - code_base64_convert
          - success_count
          variable: success_count
        - value_selector:
          - code_base64_convert
          - base64_success_count
          variable: base64_success_count
        selected: false
        title: çµ‚äº†
        type: end
      height: 192
      id: end_1
      position:
        x: 2536
        y: 300
      positionAbsolute:
        x: 2536
        y: 300
      selected: false
      type: custom
      width: 242
    - data:
        error_handle_mode: terminated
        flatten_output: true
        height: 199
        is_parallel: false
        iterator_input_type: array[string]
        iterator_selector:
        - code_parse_slides
        - slides_array
        output_selector:
        - '1770216163260'
        - text
        output_type: array[string]
        parallel_nums: 10
        selected: false
        start_node_id: 1770215929047start
        title: ç”»åƒç”Ÿæˆãƒ«ãƒ¼ãƒ—
        type: iteration
        width: 906
      height: 199
      id: '1770215929047'
      position:
        x: 884.5
        y: 300
      positionAbsolute:
        x: 884.5
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 906
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1770215929047start
      parentId: '1770215929047'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 908.5
        y: 368
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        isInIteration: true
        isInLoop: false
        iteration_id: '1770215929047'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.0-flash
          provider: langgenius/gemini/google
        prompt_template:
        - id: ca0afad1-84fd-4579-8011-81e7a3325beb
          role: system
          text: 'ã‚ãªãŸã¯ç”»åƒç”ŸæˆAIç”¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã™ã€‚

            Instagramã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚ºï¼ˆ9:16ã€1080x1920pxï¼‰ç”¨ã®èƒŒæ™¯ç”»åƒã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®è‹±èªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚


            ## é‡è¦ï¼šä½™ç™½ï¼ˆãƒã‚¬ãƒ†ã‚£ãƒ–ã‚¹ãƒšãƒ¼ã‚¹ï¼‰ã®ç¢ºä¿

            Instagramã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚ºã§ã¯ä»¥ä¸‹ã®UIè¦ç´ ã¨é‡ãªã‚‰ãªã„ã‚ˆã†ä½™ç™½ã‚’ç¢ºä¿ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

            - ä¸Šéƒ¨120px: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³

            - ä¸‹éƒ¨200px: è¿”ä¿¡å…¥åŠ›æ¬„ã€ã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ã€ã„ã„ã­ãƒœã‚¿ãƒ³

            - ä¸­å¤®éƒ¨åˆ†: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ–‡å­—ã‚’è¼‰ã›ã‚‹ãƒ¡ã‚¤ãƒ³é ˜åŸŸ


            ## æ§‹å›³ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ã®æŒ‡ç¤º

            - center_focus: ä¸­å¤®ã«å¤§ããªç©ºç™½ã€ä¸Šä¸‹ç«¯ã®ã¿ã«æŠ½è±¡çš„ãªè£…é£¾è¦ç´ 

            - top_heavy: ä¸Šéƒ¨1/3ã«è¦–è¦šè¦ç´ ã€ä¸‹éƒ¨2/3ã¯å˜è‰²ã¾ãŸã¯ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

            - bottom_heavy: ä¸Šéƒ¨2/3ã¯å˜è‰²ã¾ãŸã¯ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ä¸‹éƒ¨1/3ã«è¦–è¦šè¦ç´ 

            - split_horizontal: ä¸Šä¸‹ã«è£…é£¾å¸¯ã€ä¸­å¤®50%ã¯ä½™ç™½

            - frame_style: å››éš…ã«å°ã•ãªè£…é£¾ã€ä¸­å¤®80%ã¯ä½™ç™½

            - gradient_fade: ä¸€æ–¹å‘ã‹ã‚‰ä»–æ–¹å‘ã¸ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€æ–‡å­—é ˜åŸŸã¯è–„ã„è‰²


            ## ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹æˆãƒ«ãƒ¼ãƒ«

            1. ã€Œ9:16 vertical format, Instagram story backgroundã€ã§é–‹å§‹

            2. æ§‹å›³ãƒ‘ã‚¿ãƒ¼ãƒ³ã«åŸºã¥ãä½™ç™½æŒ‡ç¤º

            3. é›°å›²æ°—ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã®æŒ‡å®š

            4. ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆï¼ˆHEXã‚³ãƒ¼ãƒ‰ã‚’è‰²åã«å¤‰æ›ï¼‰

            5. ã€Œspace for text overlayã€ã€Œnegative space for typographyã€ç­‰ã®ä½™ç™½å¼·èª¿

            6. ã€Œno text, no letters, no wordsã€ã§æ–‡å­—ãªã—æŒ‡å®š

            '
        - id: 5dfed8fc-a133-425f-bbdd-a4dbd265d3cd
          role: user
          text: '## ã‚¹ãƒ©ã‚¤ãƒ‰æƒ…å ±

            {{#1770215929047.item#}}


            ä¸Šè¨˜ã®æƒ…å ±ã‹ã‚‰ã€ç”»åƒç”Ÿæˆç”¨ã®è‹±èªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

            ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã¿ã‚’å‡ºåŠ›ã—ã€èª¬æ˜ã¯ä¸è¦ã§ã™ã€‚

            '
        selected: false
        structured_output:
          schema:
            additionalProperties: false
            properties:
              negative_prompt:
                description: é™¤å¤–è¦ç´ ã®ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆè‹±èªï¼‰
                type: string
              prompt:
                description: ç”»åƒç”Ÿæˆç”¨ã®ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆè‹±èªï¼‰
                type: string
            required:
            - prompt
            - negative_prompt
            type: object
        structured_output_enabled: true
        title: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1770215931878'
      parentId: '1770215929047'
      position:
        x: 126.75
        y: 68
      positionAbsolute:
        x: 1011.25
        y: 368
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    - data:
        context:
          enabled: false
          variable_selector: []
        isInIteration: true
        isInLoop: false
        iteration_id: '1770215929047'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-3-pro-image-preview
          provider: langgenius/gemini/google
        prompt_template:
        - id: fc3bde1f-9a29-4a75-9c8d-7980e4c5fab8
          role: system
          text: 'You are an image generation assistant. Generate a single Instagram
            Story background image based on the user''s prompt.


            Rules:

            - 9:16 vertical portrait orientation

            - The image must have clear negative space in the center area for text
            overlay

            - DO NOT include any text, letters, words, numbers, or watermarks in the
            image

            - Professional quality, clean composition

            - Ensure the center 50-60% of the image has low visual complexity (solid
            color, soft gradient, or subtle texture) so text can be placed on top'
        - id: a58702ce-5631-4cb8-9df9-af0bc803c81e
          role: user
          text: 'Generate an image based on the following prompt:


            {{#1770215931878.text#}}


            Generate the image now. Output only the image.'
        selected: false
        title: ç”»åƒç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 88
      id: '1770216163260'
      parentId: '1770215929047'
      position:
        x: 430
        y: 69.25
      positionAbsolute:
        x: 1314.5
        y: 369.25
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      zIndex: 1002
    viewport:
      x: -1698.6000000000001
      y: 27.69999999999999
      zoom: 0.8
  rag_pipeline_variables: []
